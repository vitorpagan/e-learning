/*! page - v0.3.0 - 2014-06-16 */
!function(a){var b=a.document,c="+",d=function(){this.initializers={},this.initializers[":before"]=[],this.initializers[":after"]=[]};d.prototype.at=function(a,b){var c,d;a=a.split(" ");for(var e=0,f=a.length;f>e;e++)c=this._buildScope(a[e]),d={variants:c.variants,fn:b},this.initializers[c.name]=this.initializers[c.name]||[],this.initializers[c.name].push(d)},d.prototype.dispatch=function(){var a=this.recognize();if(void 0!==a){var b=this._buildScope(a),c=this._buildChain(b);this._executeChain(c,b)}},d.prototype.recognize=function(){var a=b.getElementsByTagName("body")[0];return a&&a.getAttribute("data-page")},d.prototype._buildScope=function(a){var b={},d=a.split(c);return b.name=d.shift(),b.variants=d.sort(),b},d.prototype._buildChain=function(a){var b=this.initializers[":before"],c=this.initializers[a.name]||[],d=this.initializers[":after"];return b.concat(c).concat(d)},d.prototype._executeChain=function(a,b){for(var c,d,e=0,f=a.length;f>e;e++)if(d=a[e],!(d.variants.length>0&&!this._arrayMatches(b.variants,d.variants)||(c=d.fn(b.name,b.variants),c!==!1)))return},d.prototype._arrayMatches=function(a,b){if(a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!==b[c])return!1;return!0},a.page=new d,a.Page=d}(this);